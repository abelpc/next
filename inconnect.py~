import urllib2
import paramiko

class Connect:

	planetlab_ip = 'http://128.112.139.90'

	def check_availability(self, planetlab_account, host="planetlab-01.vt.nodes.planet-lab.org"):
	
		user_name = planetlab_account.getUsername()
			
		ssh = paramiko.SSHClient()
		ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
			
		try:
			ssh.connect(host, username=user_name, key_filename="/home/zekrioca/sopcast/planetlab-key")
			return True
			#stdin, stdout, stderr = ssh.exec_command("uptime")
			#type(stdin)
			#print (stdout.readlines())
				
		except:
			return False
			#print ("SSH: There was an error")
		
		

	def check_connectivity(self):
		self.check_connectivity(self, self.planetlab_ip)

	def check_connectivity(self, reference=None, time_out=None):

		if reference == None:
			reference = self.planetlab_ip
			
		if time_out == None:
			time_out = 5

		try:
			urllib2.urlopen(reference, timeout=time_out)
			return True

		except:
			return False
